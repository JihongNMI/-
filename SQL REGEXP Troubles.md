# 1. WHERE REGEXP_LIKE(text, [A-Z][0-9]{3})

🤷‍♀️[A-Z][0-9]{3}은 기준이 어떻게 되는거야

✨[A-Z][0-9]{3}은 대문자 알파벳 하나 뒤에 숫자 세 개가 오는 패턴을 찾는 정규식입니다.

일치하는 예시:

A123

Z999

K000

일치하지 않는 예시:

a123 (소문자)

A1234 (숫자가 네 자리)

AB123 (알파벳이 두 자리)

🤷‍♀️아.. A1234는 안되네?

✨네, 맞아요. A1234는 [A-Z][0-9]{3} 패턴에 맞지 않아서 매치되지 않습니다.

왜 A1234는 안 될까요? 🤔
정규식 [A-Z][0-9]{3}은 두 가지 규칙을 정확하게 만족해야 합니다.

네 자리 숫자도 포함하고 싶다면?

[A-Z][0-9]+: 숫자가 한 개 이상인 경우를 찾습니다. (A1, A1234 모두 일치)

[A-Z][0-9]{3,4}: 숫자가 세 개 또는 네 개인 경우를 찾습니다. (A123, A1234 모두 일치)

[A-Z][0-9]{3,} : 이 정규식은 대문자 알파벳 하나 뒤에 숫자가 3개 이상 오는 패턴을 찾습니다.

{3,}: 3번 이상 반복된다는 뜻입니다. 콤마(,) 뒤에 숫자가 없으면 '이상'을 의미해요.

🤷‍♀️이건 첫글자가 그럴 필요는 없는거지. 예를 들면 ##A123도 검색돼?

✨네, 맞습니다. [A-Z][0-9]{3,} 정규식은 문자열의 첫 글자가 A-Z일 필요가 없습니다.

이 정규식은 전체 문자열에서 [A-Z][0-9]{3,} 패턴이 포함되어 있는지를 찾습니다.

만약 문자열의 첫 부분부터 패턴이 일치해야 한다면, 정규식 앞에 ^ 기호를 붙여야 합니다.

^[A-Z][0-9]{3,}: 이 정규식은 문자열이 대문자 + 3자리 이상의 숫자로 시작해야만 일치합니다. 따라서 A123은 일치하지만, ##A123은 일치하지 않습니다.

# 2. reg(정규) 안에 보기 쉽게 하려고 공백을 쓰면 안돼
🤷‍♀️
select '20250923',
        regexp_replace('20250923', '([0-9]{4}) ([0-9]{2}) ([0-9]{2})',
                    '\1-\2-\3') as "date format"
                    from dual;
                    
✨ 당신이 작성한 SQL 문은 Oracle SQL에서 날짜 문자열을 YYYY-MM-DD 형식으로 바꾸려고 하는 시도입니다.

하지만 현재 SQL에는 중요한 문제가 있습니다:

✅ 수정된 올바른 쿼리 (Oracle SQL 기준):
SELECT 
    '20250923' AS "original",
    REGEXP_REPLACE('20250923', '([0-9]{4})([0-9]{2})([0-9]{2})', '\1-\2-\3') AS "date format"
FROM dual;

# 2-1. 책에 \1 \2 에 대한 설명이 없어서 물어봤다. : 역참조(Backreference)

✨ \1, \2, \3란?
'\1-\2-\3'는 정규표현식에서 캡처한 그룹들을 재조합(replacement) 하기 위한 구문입니다.
\1, \2, \3는 정규식에서 괄호로 그룹화된 부분을 재사용할 때 사용하는 참조 기호입니다.
Oracle의 REGEXP_REPLACE() 함수에서는 이것들을 사용해 문자열을 포맷할 수 있습니다.
실전에서는 문자열 파싱, 포맷팅, 변환 등에 자주 사용됩니다.

🤷‍♀️ 이걸 쓰려면 꼭 ()로 묶어야 하나?

✨ 네, 역참조(\1, \2 등)를 사용하려면 반드시 괄호 ()로 패턴을 묶어야 합니다.

괄호 ()는 정규식에서 **캡처 그룹(capture group)**을 만드는 역할을 합니다. 캡처 그룹은 일치하는 문자열의 특정 부분을 메모리에 저장하는 기능입니다. 이 저장된 내용은 역참조를 통해 다시 불러와 사용할 수 있습니다.
